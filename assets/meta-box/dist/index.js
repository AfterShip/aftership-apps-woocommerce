var Un=Object.defineProperty,Fn=Object.defineProperties;var Hn=Object.getOwnPropertyDescriptors;var st=Object.getOwnPropertySymbols;var qn=Object.prototype.hasOwnProperty,Qn=Object.prototype.propertyIsEnumerable;var ot=(T,C,y)=>C in T?Un(T,C,{enumerable:!0,configurable:!0,writable:!0,value:y}):T[C]=y,D=(T,C)=>{for(var y in C||(C={}))qn.call(C,y)&&ot(T,y,C[y]);if(st)for(var y of st(C))Qn.call(C,y)&&ot(T,y,C[y]);return T},P=(T,C)=>Fn(T,Hn(C));var ae=(T,C,y)=>new Promise((ce,R)=>{var Y=m=>{try{Q(y.next(m))}catch(M){R(M)}},W=m=>{try{Q(y.throw(m))}catch(M){R(M)}},Q=m=>m.done?ce(m.value):Promise.resolve(m.value).then(Y,W);Q((y=y.apply(T,C)).next())});(function(){"use strict";const T=(e,n)=>e===n,C=Symbol("solid-proxy"),y={equals:T};let ce=Le;const R={},Y=1,W=2,Q={owned:null,cleanups:null,context:null,owner:null};var m=null;let M=null,k=null,K=null,N=null,B=null,ve=0;function ue(e,n){n&&(m=n);const t=k,i=m,r=e.length===0?Q:{owned:null,cleanups:null,context:null,owner:i};m=r,k=null;let l;try{$e(()=>l=e(()=>Se(r)),!0)}finally{k=t,m=i}return l}function Z(e,n){n=n?Object.assign({},y,n):y;const t={value:e,observers:null,observerSlots:null,pending:R,comparator:n.equals||void 0};return[Ee.bind(t),i=>(typeof i=="function"&&(M&&M.running&&M.sources.has(t)?i=i(t.pending!==R?t.pending:t.tValue):i=i(t.pending!==R?t.pending:t.value)),be(t,i))]}function E(e,n,t){const i=ye(e,n,!1,Y);de(i)}function X(e,n,t){ce=gt;const i=ye(e,n,!1,Y);i.user=!0,B&&B.push(i)}function U(e,n,t){t=t?Object.assign({},y,t):y;const i=ye(e,n,!0,0);return i.pending=R,i.observers=null,i.observerSlots=null,i.comparator=t.equals||void 0,de(i),Ee.bind(i)}function at(e){if(K)return e();let n;const t=K=[];try{n=e()}finally{K=null}return $e(()=>{for(let i=0;i<t.length;i+=1){const r=t[i];if(r.pending!==R){const l=r.pending;r.pending=R,be(r,l)}}},!1),n}function ee(e){let n,t=k;return k=null,n=e(),k=t,n}function ct(e){X(()=>ee(e))}function ut(e){return m===null||(m.cleanups===null?m.cleanups=[e]:m.cleanups.push(e)),e}function Ee(){const e=M;if(this.sources&&(this.state||e)){const n=N;N=null,this.state===Y||e?de(this):ke(this),N=n}if(k){const n=this.observers?this.observers.length:0;k.sources?(k.sources.push(this),k.sourceSlots.push(n)):(k.sources=[this],k.sourceSlots=[n]),this.observers?(this.observers.push(k),this.observerSlots.push(k.sources.length-1)):(this.observers=[k],this.observerSlots=[k.sources.length-1])}return this.value}function be(e,n,t){if(e.comparator&&e.comparator(e.value,n))return n;if(K)return e.pending===R&&K.push(e),e.pending=n,n;let i=!1;return e.value=n,e.observers&&e.observers.length&&$e(()=>{for(let r=0;r<e.observers.length;r+=1){const l=e.observers[r];i&&M.disposed.has(l),l.pure?N.push(l):B.push(l),l.observers&&(i&&!l.tState||!i&&!l.state)&&Oe(l),i||(l.state=Y)}if(N.length>1e6)throw N=[],new Error},!1),n}function de(e){if(!e.fn)return;Se(e);const n=m,t=k,i=ve;k=m=e,dt(e,e.value,i),k=t,m=n}function dt(e,n,t){let i;try{i=e.fn(n)}catch(r){De(r)}(!e.updatedAt||e.updatedAt<=t)&&(e.observers&&e.observers.length?be(e,i):e.value=i,e.updatedAt=t)}function ye(e,n,t,i=Y,r){const l={fn:e,state:i,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:n,owner:m,context:null,pure:t};return m===null||m!==Q&&(m.owned?m.owned.push(l):m.owned=[l]),l}function te(e){const n=M;if(e.state!==Y)return e.state=0;if(e.suspense&&ee(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ve);)(e.state||n)&&t.push(e);for(let i=t.length-1;i>=0;i--)if(e=t[i],e.state===Y||n)de(e);else if(e.state===W||n){const r=N;N=null,ke(e),N=r}}function $e(e,n){if(N)return e();let t=!1;n||(N=[]),B?t=!0:B=[],ve++;try{e()}catch(i){De(i)}finally{ft(t)}}function ft(e){N&&(Le(N),N=null),!e&&(B.length?at(()=>{ce(B),B=null}):B=null)}function Le(e){for(let n=0;n<e.length;n++)te(e[n])}function gt(e){let n,t=0;for(n=0;n<e.length;n++){const r=e[n];r.user?e[t++]=r:te(r)}const i=e.length;for(n=0;n<t;n++)te(e[n]);for(n=i;n<e.length;n++)te(e[n])}function ke(e){e.state=0;const n=M;for(let t=0;t<e.sources.length;t+=1){const i=e.sources[t];i.sources&&(i.state===Y||n?te(i):(i.state===W||n)&&ke(i))}}function Oe(e){const n=M;for(let t=0;t<e.observers.length;t+=1){const i=e.observers[t];(!i.state||n)&&(i.state=W,i.pure?N.push(i):B.push(i),i.observers&&Oe(i))}}function Se(e){let n;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),i=e.sourceSlots.pop(),r=t.observers;if(r&&r.length){const l=r.pop(),s=t.observerSlots.pop();i<r.length&&(l.sourceSlots[s]=i,r[i]=l,t.observerSlots[i]=s)}}if(e.owned){for(n=0;n<e.owned.length;n++)Se(e.owned[n]);e.owned=null}if(e.cleanups){for(n=0;n<e.cleanups.length;n++)e.cleanups[n]();e.cleanups=null}e.state=0,e.context=null}function De(e){throw e}const ht=Symbol("fallback");function Pe(e){for(let n=0;n<e.length;n++)e[n]()}function _t(e,n,t={}){let i=[],r=[],l=[],s=0,a=n.length>1?[]:null;return ut(()=>Pe(l)),()=>{let _=e()||[],h,o;return ee(()=>{let c=_.length,d,v,$,j,L,f,w,p,x;if(c===0)s!==0&&(Pe(l),l=[],i=[],r=[],s=0,a&&(a=[])),t.fallback&&(i=[ht],r[0]=ue(S=>(l[0]=S,t.fallback())),s=1);else if(s===0){for(r=new Array(c),o=0;o<c;o++)i[o]=_[o],r[o]=ue(u);s=c}else{for($=new Array(c),j=new Array(c),a&&(L=new Array(c)),f=0,w=Math.min(s,c);f<w&&i[f]===_[f];f++);for(w=s-1,p=c-1;w>=f&&p>=f&&i[w]===_[p];w--,p--)$[p]=r[w],j[p]=l[w],a&&(L[p]=a[w]);for(d=new Map,v=new Array(p+1),o=p;o>=f;o--)x=_[o],h=d.get(x),v[o]=h===void 0?-1:h,d.set(x,o);for(h=f;h<=w;h++)x=i[h],o=d.get(x),o!==void 0&&o!==-1?($[o]=r[h],j[o]=l[h],a&&(L[o]=a[h]),o=v[o],d.set(x,o)):l[h]();for(o=f;o<c;o++)o in $?(r[o]=$[o],l[o]=j[o],a&&(a[o]=L[o],a[o](o))):r[o]=ue(u);r=r.slice(0,s=c),i=_.slice(0)}return r});function u(c){if(l[o]=c,a){const[d,v]=Z(o);return a[o]=v,n(_[o],d)}return n(_[o])}}}function I(e,n){return ee(()=>e(n))}function fe(){return!0}const mt={get(e,n,t){return n===C?t:e.get(n)},has(e,n){return e.has(n)},set:fe,deleteProperty:fe,getOwnPropertyDescriptor(e,n){return{configurable:!0,enumerable:!0,get(){return e.get(n)},set:fe,deleteProperty:fe}},ownKeys(e){return e.keys()}};function pe(e){return typeof e=="function"?e():e}function vt(...e){return new Proxy({get(n){for(let t=e.length-1;t>=0;t--){const i=pe(e[t])[n];if(i!==void 0)return i}},has(n){for(let t=e.length-1;t>=0;t--)if(n in pe(e[t]))return!0;return!1},keys(){const n=[];for(let t=0;t<e.length;t++)n.push(...Object.keys(pe(e[t])));return[...new Set(n)]}},mt)}function ge(e){const n="fallback"in e&&{fallback:()=>e.fallback};return U(_t(()=>e.each,e.children,n||void 0))}function we(e){let n=!1;const t=U(()=>e.when,void 0,{equals:(i,r)=>n?i===r:!i==!r});return U(()=>{const i=t();if(i){const r=e.children;return(n=typeof r=="function"&&r.length>0)?ee(()=>r(i)):r}return e.fallback})}function Re(e,n,t){let i=t.length,r=n.length,l=i,s=0,a=0,_=n[r-1].nextSibling,h=null;for(;s<r||a<l;){if(n[s]===t[a]){s++,a++;continue}for(;n[r-1]===t[l-1];)r--,l--;if(r===s){const o=l<i?a?t[a-1].nextSibling:t[l-a]:_;for(;a<l;)e.insertBefore(t[a++],o)}else if(l===a)for(;s<r;)(!h||!h.has(n[s]))&&e.removeChild(n[s]),s++;else if(n[s]===t[l-1]&&t[a]===n[r-1]){const o=n[--r].nextSibling;e.insertBefore(t[a++],n[s++].nextSibling),e.insertBefore(t[--l],o),n[r]=t[l]}else{if(!h){h=new Map;let u=a;for(;u<l;)h.set(t[u],u++)}const o=h.get(n[s]);if(o!=null)if(a<o&&o<l){let u=s,c=1,d;for(;++u<r&&u<l&&!((d=h.get(n[u]))==null||d!==o+c);)c++;if(c>o-a){const v=n[s];for(;a<o;)e.insertBefore(t[a++],v)}else e.replaceChild(t[a++],n[s++])}else s++;else e.removeChild(n[s++])}}}const Ye="_$DX_DELEGATE";function bt(e,n,t){let i;return ue(r=>{i=r,b(n,e(),n.firstChild?null:void 0,t)}),()=>{i(),n.textContent=""}}function O(e,n,t){const i=document.createElement("template");i.innerHTML=e;let r=i.content.firstChild;return t&&(r=r.firstChild),r}function ne(e,n=window.document){const t=n[Ye]||(n[Ye]=new Set);for(let i=0,r=e.length;i<r;i++){const l=e[i];t.has(l)||(t.add(l),n.addEventListener(l,kt))}}function F(e,n,t){t==null?e.removeAttribute(n):e.setAttribute(n,t)}function Ce(e,n,t,i){i?Array.isArray(t)?(e[`$$${n}`]=t[0],e[`$$${n}Data`]=t[1]):e[`$$${n}`]=t:Array.isArray(t)?e.addEventListener(n,r=>t[0](t[1],r)):e.addEventListener(n,t)}function yt(e,n,t={}){const i=Object.keys(n||{}),r=Object.keys(t);let l,s;for(l=0,s=r.length;l<s;l++){const a=r[l];!a||a==="undefined"||n[a]||(Be(e,a,!1),delete t[a])}for(l=0,s=i.length;l<s;l++){const a=i[l],_=!!n[a];!a||a==="undefined"||t[a]===_||!_||(Be(e,a,!0),t[a]=_)}return t}function $t(e,n,t={}){const i=e.style;if(n==null||typeof n=="string")return i.cssText=n;typeof t=="string"&&(t={});let r,l;for(l in t)n[l]==null&&i.removeProperty(l),delete t[l];for(l in n)r=n[l],r!==t[l]&&(i.setProperty(l,r),t[l]=r);return t}function b(e,n,t,i){if(t!==void 0&&!i&&(i=[]),typeof n!="function")return he(e,n,i,t);E(r=>he(e,n(),r,t),i)}function Be(e,n,t){const i=n.trim().split(/\s+/);for(let r=0,l=i.length;r<l;r++)e.classList.toggle(i[r],t)}function kt(e){const n=`$$${e.type}`;let t=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==t&&Object.defineProperty(e,"target",{configurable:!0,value:t}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t}});t!==null;){const i=t[n];if(i&&!t.disabled){const r=t[`${n}Data`];if(r!==void 0?i(r,e):i(e),e.cancelBubble)return}t=t.host&&t.host!==t&&t.host instanceof Node?t.host:t.parentNode}}function he(e,n,t,i,r){for(;typeof t=="function";)t=t();if(n===t)return t;const l=typeof n,s=i!==void 0;if(e=s&&t[0]&&t[0].parentNode||e,l==="string"||l==="number")if(l==="number"&&(n=n.toString()),s){let a=t[0];a&&a.nodeType===3?a.data=n:a=document.createTextNode(n),t=ie(e,t,i,a)}else t!==""&&typeof t=="string"?t=e.firstChild.data=n:t=e.textContent=n;else if(n==null||l==="boolean")t=ie(e,t,i);else{if(l==="function")return E(()=>{let a=n();for(;typeof a=="function";)a=a();t=he(e,a,t,i)}),()=>t;if(Array.isArray(n)){const a=[];if(Ne(a,n,r))return E(()=>t=he(e,a,t,i,!0)),()=>t;if(a.length===0){if(t=ie(e,t,i),s)return t}else Array.isArray(t)?t.length===0?Ve(e,a,i):Re(e,t,a):t==null||t===""?Ve(e,a):Re(e,s&&t||[e.firstChild],a);t=a}else if(n instanceof Node){if(Array.isArray(t)){if(s)return t=ie(e,t,i,n);ie(e,t,null,n)}else t==null||t===""||!e.firstChild?e.appendChild(n):e.replaceChild(n,e.firstChild);t=n}}return t}function Ne(e,n,t){let i=!1;for(let r=0,l=n.length;r<l;r++){let s=n[r],a;if(s instanceof Node)e.push(s);else if(!(s==null||s===!0||s===!1))if(Array.isArray(s))i=Ne(e,s)||i;else if((a=typeof s)==="string")e.push(document.createTextNode(s));else if(a==="function")if(t){for(;typeof s=="function";)s=s();i=Ne(e,Array.isArray(s)?s:[s])||i}else e.push(s),i=!0;else e.push(document.createTextNode(s.toString()))}return i}function Ve(e,n,t){for(let i=0,r=n.length;i<r;i++)e.insertBefore(n[i],t)}function ie(e,n,t,i){if(t===void 0)return e.textContent="";const r=i||document.createTextNode("");if(n.length){let l=!1;for(let s=n.length-1;s>=0;s--){const a=n[s];if(r!==a){const _=a.parentNode===e;!l&&!s?_?e.replaceChild(r,a):e.insertBefore(r,t):_&&e.removeChild(a)}else l=!0}}else e.insertBefore(r,t);return[r]}var Ze={button:"_button_1dv9o_1",primary:"_primary_1dv9o_18"};const St=O("<button></button>"),ze=e=>(()=>{const n=St.cloneNode(!0);return Ce(n,"click",e.onClick,!0),b(n,()=>e.children),E(t=>{const i={[Ze.button]:!0,[Ze.primary]:e.type==="primary"},r=e.disabled,l=e.style;return t._v$=yt(n,i,t._v$),r!==t._v$2&&(n.disabled=t._v$2=r),t._v$3=$t(n,l,t._v$3),t},{_v$:void 0,_v$2:void 0,_v$3:void 0}),n})();ne(["click"]);var _e={root:"_root_1nuhb_1",loading:"_loading_1nuhb_5",tracking:"_tracking_1nuhb_19",title:"_title_1nuhb_23",content:"_content_1nuhb_37"};const[re,pt]=Z([]),[Ge,wt]=Z([]),[Ue,Ct]=Z(new Map),[Nt,xt]=Z([]);function xe(){return ae(this,null,function*(){var e;yield fetch("/wp-admin/admin-ajax.php?action=aftership_get_order_trackings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order_id:window.woocommerce_admin_meta_boxes.post_id,security:((e=document.querySelector("#aftership_get_nonce"))==null?void 0:e.value)||""})}).then(n=>n.json()).then(n=>{const t=n.data,i=window.get_aftership_couriers(),r=new Map;t.selected_couriers.forEach(l=>{r.set(l.slug,l)}),t.trackings.forEach(l=>{if(r.has(l.slug))return;const s=i.find(a=>a.slug===l.slug);s&&r.set(l.slug,s)}),pt(t.trackings),wt(t.selected_couriers),Ct(r),xt(t.line_items)})})}function At(e){return ae(this,null,function*(){var i;const t=[...re().filter(r=>r.tracking_id!==e.tracking_id),e].map(r=>Object.fromEntries(Object.entries(r).filter(([l,s])=>l!=="tracking_link")));yield fetch("/wp-admin/admin-ajax.php?action=aftership_save_order_tracking",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order_id:window.woocommerce_admin_meta_boxes.post_id,security:((i=document.querySelector("#aftership_create_nonce"))==null?void 0:i.value)||"",modified_tracking_ids:e.tracking_id?[e.tracking_id]:[],trackings:t})}),yield xe()})}function Tt(e){return ae(this,null,function*(){var n;yield fetch("/wp-admin/admin-ajax.php?action=aftership_delete_order_tracking",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order_id:window.woocommerce_admin_meta_boxes.post_id,security:((n=document.querySelector("#aftership_delete_nonce"))==null?void 0:n.value)||"",trackings:re().filter(t=>t.tracking_id!==e)})}),yield xe()})}var It=typeof global=="object"&&global&&global.Object===Object&&global,jt=It,Mt=typeof self=="object"&&self&&self.Object===Object&&self,Et=jt||Mt||Function("return this")(),Lt=Et,Ot=Lt.Symbol,J=Ot,Fe=Object.prototype,Dt=Fe.hasOwnProperty,Pt=Fe.toString,le=J?J.toStringTag:void 0;function Rt(e){var n=Dt.call(e,le),t=e[le];try{e[le]=void 0;var i=!0}catch(l){}var r=Pt.call(e);return i&&(n?e[le]=t:delete e[le]),r}var Yt=Object.prototype,Bt=Yt.toString;function Vt(e){return Bt.call(e)}var Zt="[object Null]",zt="[object Undefined]",He=J?J.toStringTag:void 0;function Gt(e){return e==null?e===void 0?zt:Zt:He&&He in Object(e)?Rt(e):Vt(e)}function Ut(e){return e!=null&&typeof e=="object"}var Ft="[object Symbol]";function Ht(e){return typeof e=="symbol"||Ut(e)&&Gt(e)==Ft}function qt(e,n){for(var t=-1,i=e==null?0:e.length,r=Array(i);++t<i;)r[t]=n(e[t],t,e);return r}var Qt=Array.isArray,Jt=Qt,Wt=1/0,qe=J?J.prototype:void 0,Qe=qe?qe.toString:void 0;function Je(e){if(typeof e=="string")return e;if(Jt(e))return qt(e,Je)+"";if(Ht(e))return Qe?Qe.call(e):"";var n=e+"";return n=="0"&&1/e==-Wt?"-0":n}function We(e){return e==null?"":Je(e)}function Kt(e,n,t){var i=-1,r=e.length;n<0&&(n=-n>r?0:r+n),t=t>r?r:t,t<0&&(t+=r),r=n>t?0:t-n>>>0,n>>>=0;for(var l=Array(r);++i<r;)l[i]=e[i+n];return l}function Xt(e,n,t){var i=e.length;return t=t===void 0?i:t,!n&&t>=i?e:Kt(e,n,t)}var en="\\ud800-\\udfff",tn="\\u0300-\\u036f",nn="\\ufe20-\\ufe2f",rn="\\u20d0-\\u20ff",ln=tn+nn+rn,sn="\\ufe0e\\ufe0f",on="\\u200d",an=RegExp("["+on+en+ln+sn+"]");function Ke(e){return an.test(e)}function cn(e){return e.split("")}var Xe="\\ud800-\\udfff",un="\\u0300-\\u036f",dn="\\ufe20-\\ufe2f",fn="\\u20d0-\\u20ff",gn=un+dn+fn,hn="\\ufe0e\\ufe0f",_n="["+Xe+"]",Ae="["+gn+"]",Te="\\ud83c[\\udffb-\\udfff]",mn="(?:"+Ae+"|"+Te+")",et="[^"+Xe+"]",tt="(?:\\ud83c[\\udde6-\\uddff]){2}",nt="[\\ud800-\\udbff][\\udc00-\\udfff]",vn="\\u200d",it=mn+"?",rt="["+hn+"]?",bn="(?:"+vn+"(?:"+[et,tt,nt].join("|")+")"+rt+it+")*",yn=rt+it+bn,$n="(?:"+[et+Ae+"?",Ae,tt,nt,_n].join("|")+")",kn=RegExp(Te+"(?="+Te+")|"+$n+yn,"g");function Sn(e){return e.match(kn)||[]}function pn(e){return Ke(e)?Sn(e):cn(e)}function wn(e){return function(n){n=We(n);var t=Ke(n)?pn(n):void 0,i=t?t[0]:n.charAt(0),r=t?Xt(t,1).join(""):n.slice(1);return i[e]()+r}}var Cn=wn("toUpperCase"),Nn=Cn;function xn(e){return Nn(We(e).toLowerCase())}var me={container:"_container_1s8av_1",backdrop:"_backdrop_1s8av_8",modal:"_modal_1s8av_15"},An="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmkteCIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICA8cGF0aCBmaWxsPSIjNjY2IiBkPSJNNC42NDYgNC42NDZhLjUuNSAwIDAgMSAuNzA4IDBMOCA3LjI5M2wyLjY0Ni0yLjY0N2EuNS41IDAgMCAxIC43MDguNzA4TDguNzA3IDhsMi42NDcgMi42NDZhLjUuNSAwIDAgMS0uNzA4LjcwOEw4IDguNzA3bC0yLjY0NiAyLjY0N2EuNS41IDAgMCAxLS43MDgtLjcwOEw3LjI5MyA4IDQuNjQ2IDUuMzU0YS41LjUgMCAwIDEgMC0uNzA4eiIvPgo8L3N2Zz4=";const Tn=O('<div><div></div><section><header><h1></h1><div role="button"><img></div></header><article></article><footer></footer></section></div>');function In(e){return X(()=>{e.visible?document.body.style.overflowY="hidden":document.body.style.overflowY="auto"}),I(we,{get when(){return e.visible},get children(){const n=Tn.cloneNode(!0),t=n.firstChild,i=t.nextSibling,r=i.firstChild,l=r.firstChild,s=l.nextSibling,a=s.firstChild,_=r.nextSibling,h=_.nextSibling;return Ce(t,"click",e.onCancel,!0),b(l,()=>e.title),Ce(s,"click",e.onCancel,!0),F(a,"src",An),b(_,()=>e.children),b(h,I(ze,{get disabled(){return e.disabled},onClick:()=>e.onOk&&e.onOk(),type:"primary",get children(){return e.okText||"Ok"}})),E(o=>{const u=me.container,c=me.backdrop,d=me.modal,v=me.header;return u!==o._v$&&(n.className=o._v$=u),c!==o._v$2&&(t.className=o._v$2=c),d!==o._v$3&&(i.className=o._v$3=d),v!==o._v$4&&(r.className=o._v$4=v),o},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),n}})}ne(["click"]);var Ie={root:"_root_a2jc4_1",suffix:"_suffix_a2jc4_24",action:"_action_a2jc4_29"},jn="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktY2FyZXQtdXAtZmlsbCIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICA8cGF0aCBmaWxsPSIjNWM1ZjYyIiBkPSJtNy4yNDcgNC44Ni00Ljc5NiA1LjQ4MWMtLjU2Ni42NDctLjEwNiAxLjY1OS43NTMgMS42NTloOS41OTJhMSAxIDAgMCAwIC43NTMtMS42NTlsLTQuNzk2LTUuNDhhMSAxIDAgMCAwLTEuNTA2IDB6Ii8+Cjwvc3ZnPg==",Mn="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktY2FyZXQtZG93bi1maWxsIiB2aWV3Qm94PSIwIDAgMTYgMTYiPgogIDxwYXRoIGZpbGw9IiM1YzVmNjIiIGQ9Ik03LjI0NyAxMS4xNCAyLjQ1MSA1LjY1OEMxLjg4NSA1LjAxMyAyLjM0NSA0IDMuMjA0IDRoOS41OTJhMSAxIDAgMCAxIC43NTMgMS42NTlsLTQuNzk2IDUuNDhhMSAxIDAgMCAxLTEuNTA2IDB6Ii8+Cjwvc3ZnPg==";const En=O("<div>of </div>"),Ln=O('<div><div><input type="number" inputmode="numeric"></div><div aria-hidden><div role="button" tabindex="-1"><img></div><div role="button" tabindex="-1"><img></div></div></div>');function On(e){let n;const t=vt({step:1},e),[i,r]=Z(e.hasOwnProperty("value")?e.value:e.defaultValue);X(()=>{t.onChange&&t.onChange(i())}),X(()=>{e.hasOwnProperty("value")&&r(e.value)});function l(o){return t.min!==void 0&&Number(o)<t.min}function s(o){return t.max!==void 0&&Number(o)>t.max}function a(o){!o||l(o)||s(o)||r(Number(o))}function _(o){if(o)if(l(o)){r(t.min),n.value=String(t.min);return}else if(s(o)){r(t.max),n.value=String(t.max);return}else r(Number(o));else n.value="",r(void 0)}function h(o){const u=i();let c;if(u===void 0)c=o>0?t.min:t.max,r(c||0);else{c=u+o*t.step;const d=String(c);if(l(d)||s(d))return}r(c)}return(()=>{const o=Ln.cloneNode(!0),u=o.firstChild,c=u.firstChild,d=u.nextSibling,v=d.firstChild,$=v.firstChild,j=v.nextSibling,L=j.firstChild;return c.addEventListener("blur",f=>_(f.currentTarget.value)),c.$$input=f=>a(f.currentTarget.value),(f=>n=f)(c),b(o,I(we,{get when(){return t.max!==void 0},get children(){const f=En.cloneNode(!0);return f.firstChild,f.$$click=()=>n.focus(),b(f,()=>t.max,null),E(()=>f.className=Ie.suffix),f}}),d),v.$$click=()=>h(1),F($,"src",jn),j.$$click=()=>h(-1),F(L,"src",Mn),E(f=>{const w=Ie.root,p=t.min,x=t.max,S=i(),H=Ie.action;return w!==f._v$&&(o.className=f._v$=w),p!==f._v$2&&F(c,"min",f._v$2=p),x!==f._v$3&&F(c,"max",f._v$3=x),S!==f._v$4&&(c.value=f._v$4=S),H!==f._v$5&&(d.className=f._v$5=H),f},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),o})()}ne(["input","click"]);var je={modal:"_modal_1b9gd_1",items:"_items_1b9gd_5",input:"_input_1b9gd_26"};const Dn=O('<div style="color: red;"></div>'),Pn=O('<div><table><thead><tr><th>Name</th><th>Qty.</th></tr></thead><tbody></tbody></table><hr><div><div><label>Courier:<select></select></label><a href="admin.php?page=aftership-setting-admin">Update carrier list</a></div><div><label>Tracking number:<input></label></div></div></div>'),Rn=O("<tr><td></td><td></td></tr>"),Yn=O("<option></option>"),Bn=O("<div><label>:<input></label></div>"),Me={tracking_id:"",tracking_number:"",slug:"",additional_fields:{account_number:"",key:"",postal_code:"",ship_date:"",destination_country:"",state:""},line_items:{}};function Vn(e){const[n,t]=Z(Me),i=U(()=>{var c;return(((c=Ue().get(n().slug))==null?void 0:c.required_fields)||[]).map(d=>({key:d.replace(/^tracking_/,""),name:d.replace(/^tracking_/,"").split("_").map(xn).join(" ")}))}),r=U(()=>e.value?re().filter(u=>{var c;return u.tracking_id!==((c=e.value)==null?void 0:c.tracking_id)}):re()),l=U(()=>{const u=new Map;return r().forEach(d=>{var v;(v=d.line_items)==null||v.forEach($=>{u.has(Number($.id))?u.set(Number($.id),(u.get(Number($.id))||0)+Number($.quantity)):u.set(Number($.id),Number($.quantity))})}),Nt().map(d=>{const v=u.get(d.id)||0;return{id:d.id,name:d.name,quantity:d.quantity-v}}).filter(d=>d.quantity>0)});X(()=>{var c,d;const u=new Date().toISOString().split("T")[0];e.visible&&e.value?t({tracking_id:e.value.tracking_id,slug:e.value.slug,tracking_number:e.value.tracking_number,additional_fields:P(D({},e.value.additional_fields),{ship_date:e.value.additional_fields.ship_date||u}),line_items:{}}):t(P(D({},Me),{slug:((d=(c=Ge())==null?void 0:c[0])==null?void 0:d.slug)||"",additional_fields:P(D({},Me.additional_fields),{ship_date:u})}))});const s=U(()=>{let u=!0;const c={};return n().slug===""&&(u=!1,c.slug="Required"),n().tracking_number===""&&(u=!1),r().some(d=>d.slug===n().slug&&d.tracking_number===n().tracking_number)&&(u=!1,c.tracking_number="This shipment has already been added."),i().forEach(d=>{n().additional_fields[d.key]===""&&(u=!1,c.additional_fields=P(D({},c.additional_fields),{[d.key]:"Required"}))}),{isValid:u,errors:c}}),a=(u,c)=>{t(d=>P(D({},d),{line_items:P(D({},d.line_items),{[u]:c})}))},_=(u,c)=>t(d=>P(D({},d),{[u]:c.trim()})),h=(u,c)=>t(d=>P(D({},d),{additional_fields:P(D({},d.additional_fields),{[u]:c.trim()})}));return I(In,{get title(){var u;return((u=e.value)==null?void 0:u.tracking_id)?"Edit tracking":"Add tracking"},get visible(){return e.visible},get okText(){var u;return((u=e.value)==null?void 0:u.tracking_id)?"Add":"Save"},onOk:()=>e.onOk(n()),get onCancel(){return e.onCancel},get disabled(){return!s().isValid},get children(){const u=Pn.cloneNode(!0),c=u.firstChild,d=c.firstChild,v=d.nextSibling,$=c.nextSibling,j=$.nextSibling,L=j.firstChild,f=L.firstChild,w=f.firstChild,p=w.nextSibling,x=L.nextSibling,S=x.firstChild,H=S.firstChild,se=H.nextSibling;return b(v,I(ge,{get each(){return l()},children:g=>(()=>{const A=Rn.cloneNode(!0),z=A.firstChild,q=z.nextSibling;return b(z,()=>g.name),b(q,I(On,{min:0,get max(){return g.quantity},step:1,get defaultValue(){return g.quantity},onChange:G=>a(g.id,G||0)})),A})()})),$.style.setProperty("margin","20px 0"),p.addEventListener("change",g=>_("slug",g.currentTarget.value)),b(p,I(ge,{get each(){return Ge()},children:g=>(()=>{const A=Yn.cloneNode(!0);return b(A,()=>g.name||g.other_name),E(()=>A.value=g.slug),A})()})),se.$$input=g=>_("tracking_number",g.currentTarget.value),b(x,I(we,{get when(){return s().errors.tracking_number},get children(){const g=Dn.cloneNode(!0);return b(g,()=>s().errors.tracking_number),g}}),null),b(j,I(ge,{get each(){return i()},children:g=>(()=>{const A=Bn.cloneNode(!0),z=A.firstChild,q=z.firstChild,G=q.nextSibling;return b(z,()=>g.name,q),G.$$input=V=>h(g.key,V.currentTarget.value),E(V=>{const oe=g.key==="ship_date"?"date":"text",lt=n().additional_fields[g.key];return oe!==V._v$6&&F(G,"type",V._v$6=oe),lt!==V._v$7&&(G.value=V._v$7=lt),V},{_v$6:void 0,_v$7:void 0}),A})()}),null),E(g=>{var oe;const A=je.modal,z=je.items,q=je.input,G=(oe=n())==null?void 0:oe.slug,V=n().tracking_number;return A!==g._v$&&(u.className=g._v$=A),z!==g._v$2&&(c.className=g._v$2=z),q!==g._v$3&&(j.className=g._v$3=q),G!==g._v$4&&(p.value=g._v$4=G),V!==g._v$5&&(se.value=g._v$5=V),g},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),u}})}ne(["input"]);const Zn=O("<div><div></div><div></div></div>"),zn=O('<div><div><div>Shipment </div><div><a>Edit</a><a>Delete</a></div></div><div><div><strong></strong></div><div><a target="_blank"></a></div></div></div>'),Gn=()=>{const[e,n]=Z(!1),[t,i]=Z();ct(()=>{xe()});const r=s=>ae(this,null,function*(){yield At(P(D({},s),{line_items:Object.entries(s.line_items||{}).map(([a,_])=>({id:Number(a),quantity:_}))})),n(!1),i(void 0)}),l=()=>{n(!1),i(void 0)};return(()=>{const s=Zn.cloneNode(!0),a=s.firstChild,_=a.nextSibling;return b(a,I(ge,{get each(){return re()},children:(h,o)=>(()=>{const u=zn.cloneNode(!0),c=u.firstChild,d=c.firstChild;d.firstChild;const v=d.nextSibling,$=v.firstChild,j=$.nextSibling,L=c.nextSibling,f=L.firstChild,w=f.firstChild,p=f.nextSibling,x=p.firstChild;return b(d,()=>o()+1,null),$.$$click=()=>{i(h),n(!0)},j.$$click=()=>Tt(h.tracking_id),b(w,()=>{var S;return((S=Ue().get(h.slug))==null?void 0:S.name)||h.slug}),b(x,()=>h.tracking_number),E(S=>{const H=_e.tracking,se=_e.title,g=_e.content,A=h.tracking_link;return H!==S._v$&&(u.className=S._v$=H),se!==S._v$2&&(c.className=S._v$2=se),g!==S._v$3&&(L.className=S._v$3=g),A!==S._v$4&&F(x,"href",S._v$4=A),S},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),u})()})),_.style.setProperty("padding","12px"),b(_,I(ze,{onClick:()=>n(!0),style:{width:"100%"},children:"Add Tracking Number"})),b(s,I(Vn,{get visible(){return e()},get value(){return t()},onCancel:l,onOk:r}),null),E(()=>s.className=_e.root),s})()};ne(["click"]);var fi="";console.log("src/index.js"),customElements.define("aftership-meta-box",class extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"})}connectedCallback(){if(!!this.shadowRoot){{const n=document.createElement("link");n.rel="stylesheet",n.href="/wp-content/plugins/aftership-woocommerce-tracking/assets/meta-box/dist/style.css",this.shadowRoot.appendChild(n)}bt(()=>I(Gn,{}),this.shadowRoot)}}})})();
